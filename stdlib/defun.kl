#lang kernel
[import [shift "n-ary-app.kl" 1]]

(define-macros
  ([defun
    [lambda (stx)
      (syntax-case stx
        [[list [_ f args body]]
         (pure (list-syntax
                ('define f
                 (list-syntax ('flet (list-syntax (f args body) stx) f) stx))
                stx))]
        [_ (syntax-error '"bad syntax" stx)])]]))

[export defun]

